<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-12-05T14:06:36.972Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>John Doe</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="http://example.com/2025/12/05/imges/wordpress/"/>
    <id>http://example.com/2025/12/05/imges/wordpress/</id>
    <published>2025-12-05T14:00:51.121Z</published>
    <updated>2025-12-05T14:06:36.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Re0：从零开始的wordpress建站之路">Re0：从零开始的wordpress建站之路</h2><p>很早之间就有一个搭建个人站网站的想法，只可惜之前只是有这个想法，一直没有去做，碰巧之前无意间买了一个域名，又刚好有一个<strong>ESXI</strong>虚拟化平台搭建的<strong>Ubuntu</strong>，万事俱备，趁着有时间，只欠行动,赶紧把网站搭建起来。</p><p>前提说明<br>环境：<br><br>Ubuntu 22.04.5 LTS<br><br>Apache 2.4.52 (Ubuntu)<br><br>PHP 8.1.2-1 ubuntu 2.19 (cli)<br><br>NPM docker v2.12.1<br><br>MySQL docker 8.3.0-1.el8</p><h3 id="建站选择之wordress">建站选择之<strong>wordress</strong></h3><p>为什么选wordpress？因为我完全不懂这方面，但通过网上资料了解到，它占全球网站市场份额的 40% 以上，能占据这么市场份额的不一定是最好的，但肯定是最合适的，否则它也不会如此流行。<br><br>既然选择了<strong>wordress</strong>就要去了解它的建站流程，通过资料查询，搭建<strong>wordress</strong>需要：<strong>Apache</strong> + <strong>MySQL</strong> + <strong>PHP</strong> + <strong>nginx</strong>，个人看法如果只是先练练手，可以暂时不需要域名和<strong>nginx</strong>做反代，等先建立一遍熟悉了，再部署到网络上，当然<strong>linux</strong>环境是必须的，可以选择windows可以安装虚拟机（VMware、Hyper-V）或购买vps。好消息，VMware Workstation直接官方免费了。</p><h3 id="环境搭建">环境搭建</h3><p>由于我之前就安装了<strong>MySQL</strong>和<strong>NPM(nginx proxy manager)</strong>，这里只需要搭建<strong>Apache</strong> + <strong>PHP</strong> ，就可以了。</p><h4 id="配置MySQL">配置<strong>MySQL</strong></h4><p>首先连接数据库<code>mysql -h192.168.31.16 -P3306 -uroot -p</code>其中 192.168.31.16 是 <strong>MySQL</strong>部署地址，3306为<strong>MySQL</strong>默认端口，<strong>root</strong>为登录账号，输入密码连接数据库。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE wordpress; //创建一个名为**wordpress**的数据库</span><br><span class="line">CREATE USER &#x27;wduser&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;password&#x27;; //创建一个数据库登录新用户**wduser**密码随便填写</span><br><span class="line">GRANT ALL PRIVILEGES ON wordpress.* TO &#x27;wdsuser&#x27;@&#x27;%&#x27;; //将数据库 wordpress 所有的表（*）的所有权限授予用户**wdsuser**</span><br><span class="line">FLUSH PRIVILEGES; //刷新权限</span><br><span class="line">exit //退出数据库</span><br></pre></td></tr></table></figure><p>由于我的数据库不在<strong>ubuntu</strong>里面，所以使用 <strong>@‘%’</strong>，如果数据库和wordpress在一个主机可以使用**@‘localhost’**，增强安全性。</p><h4 id="创建一个新用户，开始搭建wordpress">创建一个新用户，开始搭建<strong>wordpress</strong></h4><ol><li>创建新用户和组（主要是考虑不想影响主环境，玩坏了可以直接删了）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo useradd -m -s /bin/bash wpuser</span><br><span class="line">sudo passwd wpuser</span><br><span class="line">sudo usermod -aG sudo wpuser</span><br></pre></td></tr></table></figure><ol start="2"><li>既然都创建新用户了，那给他一个目录吧(记得给权限)</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /home/wpuser/www</span><br><span class="line">sudo chown wpuser:wpuser /home/wpuser/www</span><br><span class="line">sudo chmod 755 /home/wpuser/www</span><br></pre></td></tr></table></figure><ol start="3"><li>安装软件包</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install apache2 php libapache2-mod-php php-mysql php-curl php-gd php-mbstring php-xml php-xmlrpc php-soap php-intl php-zip -y</span><br></pre></td></tr></table></figure><ol start="4"><li>配置Apache</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/apache2/sites-available/wpuser.conf</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost *:8080&gt;</span><br><span class="line">    ServerName web.zeaolv.top</span><br><span class="line">    ServerAlias 192.168.31.17</span><br><span class="line">    # 网站根目录</span><br><span class="line">    DocumentRoot /home/wpuser/www</span><br><span class="line">    # 规则定义</span><br><span class="line">    &lt;Directory &quot;/home/wpuser/www&quot;&gt;</span><br><span class="line"></span><br><span class="line">        Options Indexes FollowSymLinks MultiViews</span><br><span class="line">        AllowOverride All</span><br><span class="line">        Require all granted</span><br><span class="line">        DirectoryIndex index.php</span><br><span class="line">        # 我配合反代用的</span><br><span class="line">        SetEnvIf X-Forwarded-Proto https HTTPS=on</span><br><span class="line">        SetEnvIf X-Forwarded-Host &quot;^(.*)$&quot; HTTP_HOST=$1</span><br><span class="line">        #处理php</span><br><span class="line">        &lt;FilesMatch &quot;\.php$&quot;&gt;</span><br><span class="line">            SetHandler application/x-httpd-php</span><br><span class="line">        &lt;/FilesMatch&gt;</span><br><span class="line">    &lt;/Directory&gt;</span><br><span class="line"># 保存退出后，让**Apache**监听8080</span><br><span class="line">sudo nano /etc/apache2/ports.conf</span><br><span class="line">#增加一行</span><br><span class="line">Listen 8080</span><br></pre></td></tr></table></figure><p>配置了一个监听8080端口的<strong>Apache</strong>虚拟主机，并为了兼顾公网和局域网，监听了域名和IP地址：<strong>ServerName web.zeaolv.top</strong> 和 <strong>ServerAlias 192.168.31.17</strong> ，进行基本配置和反代配置<br>修改Apache配置使用8080端口</p><ol start="5"><li>我的Ubuntu配置够强，经常拿来跑编译，就随随便便修改下PHP吧，可以不改</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/php/*/apache2/php.ini</span><br><span class="line"># 我修改的部分：</span><br><span class="line">upload_max_filesize = 64M</span><br><span class="line">post_max_size = 64M</span><br><span class="line">memory_limit = 256M</span><br><span class="line">max_execution_time = 300</span><br><span class="line">max_input_time = 300</span><br></pre></td></tr></table></figure><ol start="6"><li>权限给了wpuser，改一下Apache</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/apache2/envvars</span><br><span class="line"></span><br><span class="line">export APACHE_RUN_USER=wpuser</span><br><span class="line">export APACHE_RUN_GROUP=wpuser</span><br></pre></td></tr></table></figure><ol start="7"><li>安装，配置WordPress</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">#下载</span><br><span class="line">sudo cd /home/wpuser/www</span><br><span class="line">sudo wget https://wordpress.org/latest.tar.gz</span><br><span class="line">sudo tar xzvf latest.tar.gz</span><br><span class="line">sudocp -R wordpress/* .</span><br><span class="line">sudo rm -rf wordpress latest.tar.gz</span><br><span class="line"></span><br><span class="line">#设置权限</span><br><span class="line">sudo chown -R wpuser:wpuser /home/wpuser/www</span><br><span class="line">sudo find /home/wpuser/www -type d -exec chmod 755 &#123;&#125; \;</span><br><span class="line">sudo find /home/wpuser/www -type f -exec chmod 644 &#123;&#125; \;</span><br><span class="line"># 配置模块等</span><br><span class="line">sudo a2enmod rewrite</span><br><span class="line">sudo a2ensite wpuser.conf</span><br><span class="line">sudo a2dissite 000-default.conf</span><br><span class="line">sudo systemctl restart apache2</span><br><span class="line"></span><br><span class="line"># 配置wp-config.php，就填个数据库吧，我的环境有点复杂，有重定向问题，还设置了NPM，参考一下就行了</span><br><span class="line">sudo cp wp-config-sample.php wp-config.php</span><br><span class="line">sudo -u wpuser nano wp-config.php</span><br><span class="line"></span><br><span class="line">// 检测实际访问的主机名或IP</span><br><span class="line">$current_host = isset($_SERVER[&#x27;HTTP_X_FORWARDED_HOST&#x27;]) ? $_SERVER[&#x27;HTTP_X_FORWARDED_HOST&#x27;] : $_SERVER[&#x27;HTTP_HOST&#x27;];</span><br><span class="line">$is_ip_access = filter_var($current_host, FILTER_VALIDATE_IP) !== false || strpos($current_host, &#x27;192.168.&#x27;) === 0;</span><br><span class="line"></span><br><span class="line">if ($is_ip_access) &#123;</span><br><span class="line">    define(&#x27;WP_HOME&#x27;, &#x27;http://&#x27; . $current_host);</span><br><span class="line">    define(&#x27;WP_SITEURL&#x27;, &#x27;http://&#x27; . $current_host);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    define(&#x27;WP_HOME&#x27;, &#x27;https://web.zeaolv.top&#x27;);</span><br><span class="line">    define(&#x27;WP_SITEURL&#x27;, &#x27;https://web.zeaolv.top&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 处理代理</span><br><span class="line">if (isset($_SERVER[&#x27;HTTP_X_FORWARDED_PROTO&#x27;]) &amp;&amp; $_SERVER[&#x27;HTTP_X_FORWARDED_PROTO&#x27;] === &#x27;https&#x27;) &#123;</span><br><span class="line">    $_SERVER[&#x27;HTTPS&#x27;] = &#x27;on&#x27;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">define(&#x27;WP_ALLOW_MULTISITE&#x27;, true);</span><br><span class="line"></span><br><span class="line">define(&#x27;DISABLE_CANONICAL_REDIRECT&#x27;, true);</span><br><span class="line"></span><br><span class="line">define( &#x27;DB_NAME&#x27;, &#x27;web&#x27; );</span><br><span class="line"></span><br><span class="line">define( &#x27;DB_USER&#x27;, &#x27;web&#x27; );</span><br><span class="line"></span><br><span class="line">define( &#x27;DB_PASSWORD&#x27;, &#x27;82324537&#x27; );</span><br></pre></td></tr></table></figure><p>记得开放防火墙<code>sudo ufw allow 8080</code></p><h3 id="最后一步">最后一步</h3><p>接下面就简单了，进入后台一步步操作就可以了。<br>由于我的<strong>openwrt</strong>使用的是<strong>argon</strong>，所以在主题上我毫不犹豫的选择了它，结果他还是令我很满意的，网上也有很多自定义美化，可以根据需要自己选择，至此，个人网站已经基本搭建完成了，接下来开始探索吧！</p><p>对了，长时间运行后，日志文件可能变得很大，如果你空间很珍贵的话，日志文件在<code>/var/log/apache2</code> 可以使用<code>du -sh</code>查看大小，一般删除 .gz 文件通常就够了: <code>sudo rm -rf /var/log/apache2/*.gz</code></p><h3 id="最最最后一步">最最最后一步</h3><p>由于我没有ipv4公网地址，只能使用ipv6，而且ipv6指定的还是<strong>openwrt</strong>，并且设置端口转发和cloudflare泛解析，出现了重定向的跨域问题，通过查阅资料，使用玄学(bushi)解决：<br>首先<strong>NPM</strong>设置添加一个反代到<strong>wordpress</strong>，然后在advance中添加：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">location /font/ &#123;</span><br><span class="line">    alias /home/wpuser/font/; #放字体的</span><br><span class="line">    try_files $uri $uri/ =404;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">    proxy_pass http://192.168.31.17:8080;</span><br><span class="line">    proxy_http_version 1.1;</span><br><span class="line">    proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">    proxy_set_header Connection &#x27;upgrade&#x27;;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">    proxy_set_header X-Forwarded-Host $host;</span><br><span class="line">    proxy_buffer_size 128k;</span><br><span class="line">    proxy_buffers 4 256k;</span><br><span class="line">    proxy_busy_buffers_size 256k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/source/_posts%5Cimges%5Ccomment_bg.png" alt="这是图片" title="Magic Gardens"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Re0：从零开始的wordpress建站之路&quot;&gt;Re0：从零开始的wordpress建站之路&lt;/h2&gt;
&lt;p&gt;很早之间就有一个搭建个人站网站的想法，只可惜之前只是有这个想法，一直没有去做，碰巧之前无意间买了一个域名，又刚好有一个&lt;strong&gt;ESXI&lt;/stro</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="http://example.com/2025/12/05/markdown/"/>
    <id>http://example.com/2025/12/05/markdown/</id>
    <published>2025-12-05T13:55:53.897Z</published>
    <updated>2025-12-05T13:55:53.897Z</updated>
    
    
    
    
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2025/11/16/hello-world/"/>
    <id>http://example.com/2025/11/16/hello-world/</id>
    <published>2025-11-16T05:25:46.441Z</published>
    <updated>2025-11-16T05:25:46.441Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start">Quick Start</h2><h3 id="Create-a-new-post">Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server">Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files">Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites">Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>我的第一篇技术博客</title>
    <link href="http://example.com/2025/11/16/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2/"/>
    <id>http://example.com/2025/11/16/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2/</id>
    <published>2025-11-16T02:00:00.000Z</published>
    <updated>2025-11-16T05:59:52.820Z</updated>
    
    <content type="html"><![CDATA[<h2 id="欢迎来到我的博客！">欢迎来到我的博客！</h2><p>这是我使用 Hexo 和 Matery 主题搭建的第一篇博客。</p><p><strong>搭建过程</strong> 非常顺利，虽然遇到了一些小问题，但最终都解决了。</p><ul><li>步骤一：安装 Node.js 和 Git</li><li>步骤二：安装 Hexo</li><li>步骤三：部署到 GitHub Pages</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;欢迎来到我的博客！&quot;&gt;欢迎来到我的博客！&lt;/h2&gt;
&lt;p&gt;这是我使用 Hexo 和 Matery 主题搭建的第一篇博客。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;搭建过程&lt;/strong&gt; 非常顺利，虽然遇到了一些小问题，但最终都解决了。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;步骤一：</summary>
      
    
    
    
    <category term="技术教程" scheme="http://example.com/categories/%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Hexo" scheme="http://example.com/tags/Hexo/"/>
    
    <category term="博客搭建" scheme="http://example.com/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
</feed>
